<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Aggregate raster cells or SpatialPolygons/Lines — aggregate • raster</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Aggregate raster cells or SpatialPolygons/Lines — aggregate" />
<meta property="og:description" content="Raster* objects:
Aggregate a Raster* object to create a new RasterLayer or RasterBrick with a lower resolution (larger cells). 
Aggregation groups rectangular areas to create larger cells. The value for the resulting cells is computed with a user-specified function.
SpatialPolygon*:
Aggregate a SpatialPolygon* object, optionally by combining polygons that have the same attributes for one or more variables. If the polygons touch or overlap, internal boundaries are optionally &quot;dissolved&quot;." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">raster</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.5-3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/rspatial/raster/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Aggregate raster cells or SpatialPolygons/Lines</h1>
    
    <div class="hidden name"><code>aggregate.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Raster* objects:</p>
<p>Aggregate a Raster* object to create a new RasterLayer or RasterBrick with a lower resolution (larger cells). 
Aggregation groups rectangular areas to create larger cells. The value for the resulting cells is computed with a user-specified function.</p>
<p>SpatialPolygon*:</p>
<p>Aggregate a SpatialPolygon* object, optionally by combining polygons that have the same attributes for one or more variables. If the polygons touch or overlap, internal boundaries are optionally "dissolved".</p>
    </div>

    <pre class="usage"><span class='co'># S4 method for Raster</span>
<span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>fact</span>, fun<span class='op'>=</span><span class='va'>mean</span>, expand<span class='op'>=</span><span class='cn'>TRUE</span>, na.rm<span class='op'>=</span><span class='cn'>TRUE</span>, filename<span class='op'>=</span><span class='st'>''</span>, <span class='va'>...</span><span class='op'>)</span>

<span class='co'># S4 method for SpatialPolygons</span>
<span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>by</span>, <span class='va'>sums</span>, dissolve<span class='op'>=</span><span class='cn'>TRUE</span>, vars<span class='op'>=</span><span class='cn'>NULL</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p>Raster* object or SpatialPolygons* object</p></td>
    </tr>
    <tr>
      <th>fact</th>
      <td><p>postive integer. Aggregation factor expressed as number of cells in each direction (horizontally and vertically). Or two integers (horizontal and vertical aggregation factor) or three integers (when also aggregating over layers). See Details</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>function used to aggregate values</p></td>
    </tr>
    <tr>
      <th>expand</th>
      <td><p>logical. If <code>TRUE</code> the output Raster* object will be larger then the input Raster* object if a division of the number of columns or rows with <code>factor</code> is not an integer</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical. If <code>TRUE</code>, NA cells are removed from calculations</p></td>
    </tr>
    <tr>
      <th>filename</th>
      <td><p>character. Output filename (optional)</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>if <code>x</code> is a Raster* object, additional arguments as for <code><a href='writeRaster.html'>writeRaster</a></code></p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>character or integer. The variables (column names or numbers) that should be used to aggregate (dissolve) the SpatialPolygons by only maintaining unique combinations of these variables. The default setting is to use no variables and aggregate all polygons. You can also supply a vector with a length of length(x)</p></td>
    </tr>
    <tr>
      <th>sums</th>
      <td><p>list with function(s) and variable(s) to summarize. This should be a list of lists in which each element of the main lists has two items. The first item is function (e.g. mean), the second element is a vector of column names (or indices) that need to summarize with that function. Be careful with character and factor variables (you can use, e.g. 'first' <code>function(x)x[1]</code> or 'last' <code>function(x)x[length(x)]</code> or <code>modal</code> for these variables</p></td>
    </tr>
    <tr>
      <th>vars</th>
      <td><p>deprecated. Same as <code>by</code></p></td>
    </tr>
    <tr>
      <th>dissolve</th>
      <td><p>logical. If <code>TRUE</code> borders between touching or overlapping polygons are removed (requires package rgeos)</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Aggregation of a <code>x</code> will result in a Raster* object with fewer cells. The number of cells is the number of cells of <code>x</code> divided by <code>fact*fact</code> (when fact is a single number) or <code>prod(fact)</code> (when fact consists of 2 or 3 numbers). If necessary this number is adjusted according to the value of <code>expand</code>. For example, <code>fact=2</code> will result in a new Raster* object with <code>2*2=4</code> times fewer cells. If two numbers are supplied, e.g., <code>fact=c(2,3)</code>, the first will be used for aggregating in the horizontal direction, and the second for aggregating in the vertical direction, and the returned object will have <code>2*3=6</code> times fewer cells. Likewise, <code>fact=c(2,3,4)</code> aggregates cells in groups of 2 (rows) by 3 (columns) and 4 (layers).</p> 
<p>Aggregation starts at the upper-left end of a raster (you can use <code><a href='flip.html'>flip</a></code> if you want to start elsewhere). If a division of the number of columns or rows with <code>factor</code> does not return an integer, the extent of the resulting Raster object will either be somewhat smaller or somewhat larger than the original RasterLayer. For example, if an input RasterLayer has 100 columns, and <code>fact=12</code>, the output Raster object will have either 8 columns (<code>expand=FALSE</code>) (using <code>8 x 12 = 96</code> of the original columns) or 9 columns (<code>expand=TRUE</code>). In both cases, the maximum x coordinate of the output RasterLayer would, of course, also be adjusted.</p>  
<p>The function <code>fun</code> should take multiple numbers, and return a single number. For example <code>mean</code>, <code>modal</code>, <code>min</code> or <code>max</code>. 
It should also accept a <code>na.rm</code> argument (or ignore it as one of the 'dots' arguments).</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>RasterLayer or RasterBrick, or a SpatialPolygons* object</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='disaggregate.html'>disaggregate</a></code>, <code><a href='resample.html'>resample</a></code>. For SpatialPolygons* <code><a href='https://rdrr.io/pkg/sp/man/disaggregate.html'>disaggregate</a></code></p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Robert J. Hijmans and Jacob van Etten</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='raster.html'>raster</a></span><span class='op'>(</span><span class='op'>)</span></span>
<span class='r-in'><span class='co'># a new aggregated raster, no values</span></span>
<span class='r-in'><span class='va'>ra</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>r</span>, fact<span class='op'>=</span><span class='fl'>10</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'><a href='setValues.html'>setValues</a></span><span class='op'>(</span><span class='va'>r</span>, <span class='fu'><a href='https://rdrr.io/r/stats/Uniform.html'>runif</a></span><span class='op'>(</span><span class='fu'><a href='ncell.html'>ncell</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># a new aggregated raster, max of the values</span></span>
<span class='r-in'><span class='va'>ra</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>r</span>, fact<span class='op'>=</span><span class='fl'>10</span>, fun<span class='op'>=</span><span class='va'>max</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'># multiple layers</span></span>
<span class='r-in'><span class='va'>s</span> <span class='op'>&lt;-</span> <span class='fu'><a href='stack.html'>stack</a></span><span class='op'>(</span><span class='va'>r</span>, <span class='va'>r</span><span class='op'>*</span><span class='fl'>2</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>s</span>,<span class='fl'>2</span><span class='op'>)</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='co'>#SpatialPolygons</span></span>
<span class='r-in'><span class='kw'>if</span> <span class='op'>(</span><span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='http://rgdal.r-forge.r-project.org'>rgdal</a></span><span class='op'>)</span> <span class='op'>&amp;</span> <span class='kw'><a href='https://rdrr.io/r/base/library.html'>require</a></span><span class='op'>(</span><span class='va'><a href='https://r-forge.r-project.org/projects/rgeos/'>rgeos</a></span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span></span>
<span class='r-in'>  <span class='va'>p</span> <span class='op'>&lt;-</span> <span class='fu'><a href='shapefile.html'>shapefile</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"external/lux.shp"</span>, package<span class='op'>=</span><span class='st'>"raster"</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>p</span></span>
<span class='r-in'>  <span class='va'>pa0</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>p</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>pa0</span></span>
<span class='r-in'>  <span class='va'>pa1</span> <span class='op'>&lt;-</span> <span class='fu'>aggregate</span><span class='op'>(</span><span class='va'>p</span>, by<span class='op'>=</span><span class='st'>'NAME_1'</span>, sums<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='va'>mean</span>, <span class='st'>'ID_2'</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span></span>
<span class='r-in'>  <span class='va'>pa1</span></span>
<span class='r-in'><span class='op'>}</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loading required package: rgdal</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Please note that rgdal will be retired by the end of 2023,</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> plan transition to sf/stars/terra functions using GDAL and PROJ</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> at your earliest convenience.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> rgdal: version: 1.5-27, (SVN revision 1148)</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Geospatial Data Abstraction Library extensions to R successfully loaded</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loaded GDAL runtime: GDAL 3.2.1, released 2020/12/29</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Path to GDAL shared files: /Users/runner/work/_temp/Library/rgdal/gdal</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> GDAL binary built with GEOS: TRUE </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loaded PROJ runtime: Rel. 7.2.1, January 1st, 2021, [PJ_VERSION: 721]</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Path to PROJ shared files: /Users/runner/work/_temp/Library/rgdal/proj</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> PROJ CDN enabled: FALSE</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Linking to sp version:1.4-5</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> To mute warnings of possible GDAL/OSR exportToProj4() degradation,</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> use options("rgdal_show_exportToProj4_warnings"="none") before loading sp or rgdal.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Overwritten PROJ_LIB was /Users/runner/work/_temp/Library/rgdal/proj</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> Loading required package: rgeos</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> rgeos version: 0.5-8, (SVN revision 679)</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>  GEOS runtime version: 3.8.1-CAPI-1.13.3 </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>  Please note that rgeos will be retired by the end of 2023,</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> plan transition to sf functions using GEOS at your earliest convenience.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>  Linking to sp version: 1.4-5 </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span>  Polygon checking: TRUE </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> class       : SpatialPolygonsDataFrame </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> features    : 3 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> extent      : 5.74414, 6.528252, 49.44781, 50.18162  (xmin, xmax, ymin, ymax)</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> crs         : +proj=longlat +datum=WGS84 +no_defs </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> variables   : 2</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> names       :     NAME_1, ID_2 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> min values  :   Diekirch,    3 </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> max values  : Luxembourg,  9.5 </span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Robert J. Hijmans.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


